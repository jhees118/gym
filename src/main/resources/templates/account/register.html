<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<a th:replace="fragments/common :: header"></a><!--헤더 프래그먼트 사용-->
<body class="text-center">
<a th:replace="fragments/common :: navbar('free')"></a><!--네비바 프래그먼트 사용-->

<div th:if="${param.error}" class="alert alert-danger" role="alert">
  아이디 또는 비밀번호가 틀렸습니다.
</div>
<div th:if="${param.logout}" class="alert alert-primary" role="alert">
  로그아웃 되었습니다.
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<form th:action="@{/account/register}" th:object="${user}" method="post" autocomplete="off">
  <h1 class="h3 mb-3 fw-normal">회원가입</h1>
  <div class="form-floating">
    <input type="text" class="form-control" id="floatingInput" th:field="*{username}"  autocomplete="nope" th:errorclass="error-input">
    <label for="floatingInput">아이디 입력</label>
    <div class="d-block invalid-feedback" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">아이디에러메시지</div>
  </div>
  <div class="form-floating">
    <input type="password" class="form-control" id="pwd1" th:field="*{password}"  autocomplete="new-password" th:errorclass="error-input">
    <label for="pwd1">비밀번호 입력</label>
    <div class="d-block invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">비번에러메시지</div>
  </div>
  <div class="form-floating">
    <input type="password" class="form-control" id="pwd2">
    <label for="pwd2">비밀번호 재입력</label>
    <div class="alert alert-success" id="alert-success">비밀번호가 일치합니다.</div>
    <div class="alert alert-danger" id="alert-danger">비밀번호가 일치하지 않습니다.</div>
  </div>
  <div class="form-floating">
    <input type="text" class="form-control" id="floatingPhone" th:field="*{phone}" th:errorclass="error-input">
    <label for="floatingPhone">전화번호 입력</label>
    <div class="d-block invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}">전화번호에러메시지</div>
  </div>
  <button class="w-100 btn btn-lg btn-primary" id="submit" type="submit">회원가입</button>
</form>

<script type="text/javascript">
    $(function(){
        $("#alert-success").hide();
        $("#alert-danger").hide();
        $("input").keyup(function(){
            var pwd1=$("#pwd1").val();
            var pwd2=$("#pwd2").val();
            if(pwd1 != "" || pwd2 != ""){
                if(pwd1 == pwd2){
                    $("#alert-success").show();
                    $("#alert-danger").hide();
                    $("#submit").removeAttr("disabled");
                }else{
                    $("#alert-success").hide();
                    $("#alert-danger").show();
                    $("#submit").attr("disabled", "disabled");
                }
            }
        });
    });

</script>
<a th:replace="fragments/common :: footer"></a><!--푸터 프래그먼트 사용-->
</body>
</html>